# Zed LispBM

A LispBM extension for Zed.

It currently supports syntax higlighting and outline generation.

## Installation

This extension has not been added to the official Zed extensions repository yet, meaning that you will have to install it manually as a dev extension. You can do that by opening the command palette in Zed and running "zed: install dev extension". Then select the directory containing your cloned copy of this repository.

Unfortunately Zed is pretty bad with giving you feedback about how it's going, but if you suspect that it might have failed you can run "zed: open log", which may show any errors if you're lucky. If that fails you can also try running `zed` from the command line with the `--foreground` option, which means that Zed's output is printed to the current terminal. This may show some things which don't show up in the logs.

## Development

To develop this extension, see the [Developing Extensions](https://zed.dev/docs/extensions/developing-extensions) section of the Zed docs.

I had a bunch of trouble getting this extension to build when running NixOS. Unfortunately I'm not knowledgable enough to understand what I did to make it work. :/

### Tree-sitter grammar

This extension uses the [LispBM Tree-sitter grammar](https://github.com/cortex/tree-sitter-lispbm) for generating the syntax tree.

If you wish to develop it alongside this extension, you can achieve that by override the repository url in [extension.toml](./extension.toml). Edit the `grammar.lispbm` section so that the repository points to the appropriate Git revision in your local development repository:
```toml
[grammars.lispbm]
repository = "file:///home/<user>/.../tree-sitter-lispbm" # Path to your local Git repository.
rev = "main" # The branch or commit with the version to test.
```
*(This change should of course not be commited.)*

Then delete the `grammar/` directory in this repository. This directory contains a copy of the Tree-sitter grammar repository and is automatically generated by Zed when you install the dev exentension. Deleting it will prompt Zed to re-fetch the repository tree. Otherwise the old version would still be used.

Finally either re-install as outlined in [**Installation**](#Installation), or press the **Rebuild** button under LispBM in the extensions view.
